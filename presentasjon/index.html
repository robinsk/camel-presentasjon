<!doctype html>
 <html lang="no">
    <head>
        <meta charset="utf-8" />
        <title>Kamelåså</title>

        <meta name="description" content="Presentasjon av Apache Camel for internt fagseminar." />
        <meta name="author" content="Robin Skoglund" />

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

        <link rel="stylesheet" href="reveal.js-2.5.0/css/reveal.min.css" />
        <link rel="stylesheet" href="reveal.js-2.5.0/css/theme/default.css" id="theme" />

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="reveal.js-2.5.0/lib/css/zenburn.css" />

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="reveal.js-2.5.0/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="reveal.js-2.5.0/lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>
    <body>

        <div class="reveal">
            <div class="slides">

                <section>
                    <h1>Kamelåså</h1>
                    <pre><code class="java" data-trim>
from("http:camel.apache.org")
    .filter(body().contains("buzzword")).to("file:/dev/null")
    .to(scrutinizer) // implementasjon: robinsk
    .to("mock:result");
                    </code></pre>
                </section>



                <section>
                    <h2>«Vi forstår hinanden ikke!»</h2>

                    <video src="kamel.webm" controls>
                        Your browser does not support the <code>video</code> element.
                    </video>
                </section>



                <section>
                    <h2>Apache Camel</h2>

                    <ul>
                        <li>Hva er det?</li>
                        <li>Hva kan man gjøre med det?</li>
                        <li>Drittslenging</li>
                    </ul>
                </section>



                <section>
                    <section>
                        <h2>Hva er Apache Camel?</h2>
                        <blockquote cite="http://camel.apache.org/">
                            &ldquo;Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns.&rdquo;
                        </blockquote>
                    </section>



                    <section>
                        <h1>Javel?</h1>
                    </section>



                    <section>
                        <h2>Begreper</h2>
                        <ul>
                            <li>Route</li>
                            <li>Message / Exchange</li>
                            <li>Component</li>
                            <li>Endpoint</li>
                            <li>Processor</li>
                            <li>CamelContext</li>
                        </ul>
                        <br />
                        <br />
                        <blockquote>
                            &laquo;A <b>route</b> defines the <b>processing</b> used on an inbound <b>message</b>
                            <b>exchange</b> from a specific <b>endpoint</b> within a <b>camel context</b>.&raquo;
                        </blockquote>
                    </section>



                    <section>
                        <h3>Route</h3>

                        <pre><code class="java" data-trim>
from("activemq:ldap-provisjonering.passord") // xml fra kø
    .unmarshal().xmlBeans() // lag et objekt av xml
    .bean(passwordChangeService) // gjør noe
    .marshal().xmlBeans().convertBodyTo(String.class) // lag xml igjen
    .to("activemq:routing.meldingslobby.stop"); // send videre
                        </code></pre>
                    </section>



                    <section>
                        <h3>Component</h3>
                        <p>
                            En komponent er et transportadapter, f.eks. http, ftp, jms.
                        </p>

                        <pre><code class="java" data-trim>
from("activemq:foo").to("direct:result");
//        ↳   komponent   ↵
                        </code></pre>
                        <p>
                            Finnes for øyeblikket ~165 komponenter, eks. atom, dns, ejb, file, imap, irc, nagios,
                            scalate, twitter, printer, krati, gmail, activemq, ...
                        </p>
                    </section>



                    <section>
                        <h3>Endpoint</h3>
                        <p>
                            Komponenter eksponerer <strong>endepunkter</strong>, typisk representert som en URI.
                        </p>

                        <pre><code class="java" data-trim>
from("&lt;endpoint&gt;").to("&lt;endpoint&gt;");

// endpoint = uri = component + endpointUri
from("&lt;component&gt;:&lt;uri&gt;").to("&lt;component&gt;:&lt;uri&gt;");

from("activemq:foo").to("direct:result");
                        </code></pre>
                    </section>



                    <section>
                        <h3>Message og Exchange</h3>

                        <p>
                            <b>message</b>: interface for en melding, har en body og eventuelle headere
                        </p>
                        <br />
                        <p>
                            <b>exchange</b>: en meldingscontainer, har informasjon om rutingen av en melding fra den
                            konsumeres (exception, retries, etc)
                        </p>
                    </section>



                    <section>
                        <h3>Processor</h3>
                        <p>
                            Prosessorer gjør noe med meldinger mellom endepunkter.
                        </p>
                        <pre><code class="java" data-trim>
public interface Processor {
    /**
    * Processes the message exchange
    *
    * @param exchange the message exchange
    * @throws Exception if an internal processing error has occurred.
    */
    void process(Exchange exchange) throws Exception;
}
                        </code></pre>
                        <p>Absolutt alt er en prosessor.</p>
                    </section>



                    <section>
                        <h3>CamelContext</h3>

                        <pre><code class="xml">
&lt;beans ...&gt;

    ...

    &lt;camelContext xmlns="http://camel.apache.org/schema/spring"
                id="kamelåså"
                errorHandlerRef="dlc"&gt;

        &lt;!-- plukk opp oppsett fra spring-contexten --&gt;
        &lt;contextScan /&gt;

    &lt;/camelContext&gt;

&lt;/beans&gt;
                        </code></pre>
                    </section>
                    <section>
                        alttab til kodeeksempel
                    </section>
                </section>



                <section>
                    <section>
                        <h2>Hva kan man gjøre med camel?</h2>
                    </section>



                    <section>
                        <h3>Svar: Man kan gjøre alt med camel</h3>

                        <ul>
                            <li>De har 165 komponenter</li>
                            <li>De støtter "alle" EIP</li>
                            <li>Du kan sette opp en rute som som mottar epost, legger den på en ftp og transformerer den, så sender videre på twitter</li>
                        </ul>
                    </section>


                    <section>
                        <h3>Men ikke gjør alt med camel</h3>

                        <ul>
                            <li>De har 165 buzzword-kompatible komponenter</li>
                            <li>Du kan sette opp en rute som sender en melding fra A til B synkront, men bruke et ukesverk på å sørge for at du kan stole på den</li>
                        </ul>
                    </section>
                </section>



                <section>
                    <section>
                        <h2>Drittslenging</h2>
                        <bq>«I didn't know wtf syggelekokle was, so I just gave him some teip rests»</bq>
                    </section>



                    <section>
                        <h3>Uffda</h3>

                        <ul>
                            <li>Transaskjoner</li>
                            <li>DSL: deklarativ del vs. runtime?</li>
                            <li>Testing</li>
                            <li>Feilhåndtering</li>
                        </ul>
                    </section>



                    <section>
                        <h4>Transaskjoner</h4>
                        <pre><code class="java" data-trim>
// hva skjer om java-prosessen dør på seg under prosessering?
from("activemq:foo").to("xslt:t.xsl").bean(handler);

// enn nå?
from("activemq:foo").transacted().to("xslt:t.xsl").bean(handler);

// enn nå?
from("activemq:foo?transacted=true").to("xslt:t.xsl").bean(handler);
                        </code></pre>
                    </section>



                    <section>
                        <h4>DSL: deklarativ del vs. runtime</h4>
                        <ul>
                            <li>Man skriver DSL</li>
                            <li>Er jeg java eller camel?</li>
                            <li>Scope</li>
                            <li>Exceptions</li>
                        </ul>
                    </section>



                    <section>
                        <h4>Testing</h4>
                        <ul>
                            <li>Ønsker å teste mot et oppsett så likt prodmiljøet som mulig</li>
                            <li>Mocking</li>
                            <li>Asynkronitet</li>
                            <li>Camel ft. Spring</li>
                            <li>Camel ft. Spring &amp; ActiveMQ</li>
                        </ul>
                    </section>



                    <section>
                        <h4>ProducerTemplates i feilhåndtering</h4>
                        <pre><code class="java" data-trim>
from("activemq:foo")
    .onException(Exception.class)
        .bean(myCustomErrorHandler)
        .end()
    .to("noe som kaster exception");
                        </code></pre>
                        <ul>
                            <li>Hvis du i <code>myCustomErrorHandler</code> bruker en <code>@Produce</code> for å sende til
                                en annen kø, så kan du ikke i unittesten asserte at du får meldinger til den køa.</li>
                            <li>Workaround: lage en <code>@Produce ProducerTemplate</code> i unittesten og sette denne
                                eksplisitt i <code>myCustomErrorHandler</code>.</li>
                        </ul>
                    </section>



                    <section>
                        <h3>Feilhåndtering</h3>

                        <p>
                            Camel har feilhåndtering, men man kan ikke stole på den.
                        </p>
                        <p>
                            Vi har for øyeblikket 43 tester for å verifisere at feilhåndtering oppfører seg
                            som vi forventer og ønsker.
                        </p>
                    </section>



                    <section>
                        <h3>Feilhåntering: granularitet og scope</h3>
                        <ul>
                            <li>global errorhandler</li>
                            <li>context-scope</li>
                            <li>route-scope</li>
                            <li>onException() vs. errorHandler()</li>
                            <li>onException(RuntimeException.class) vs onException(T extends RuntimeException)</li>
                        </ul>
                    </section>



                    <section>
                        <h3>Feilhåndtering: debugging</h3>
                        <pre><code data-trim>
// 223 linjer stacktrace
2013-10-09 19:09:17.614 INFO  org.apache.camel.util.CamelLogger.log()#176: Failed delivery for (MessageId: ID:pilates.local-60460-1381338557323-3:2:1:1:1 on ExchangeId: ID-pilates-local-60456-1381338556669-0-3). On delivery attempt: 0 caught: java.lang.IllegalArgumentException: Feiler exchange med id ID-pilates-local-60456-1381338556669-0-3
2013-10-09 19:09:17.616 ERROR org.apache.camel.processor.FatalFallbackErrorHandler$1.done()#53: Exception occurred while trying to handle previously thrown exception on exchangeId: ID-pilates-local-60456-1381338556669-0-3 using: [Channel[Wrap[no.knowit.camel.routes.KøMedFeilhåndtering$2@5ade5cd9] -> no.knowit.camel.routes.KøMedFeilhåndtering$2@5ade5cd9]]. The previous and the new exception will be logged in the following.
2013-10-09 19:09:17.620 ERROR org.apache.camel.processor.FatalFallbackErrorHandler$1.done()#54: \--> Previous exception on exchangeId: ID-pilates-local-60456-1381338556669-0-3
java.lang.IllegalArgumentException: Feiler exchange med id ID-pilates-local-60456-1381338556669-0-3
    at no.knowit.camel.routes.KøMedFeilhåndtering.kastIllegalArgumentException(KøMedFeilhåndtering.java:49) ~[classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_41]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_41]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_41]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_41]
    at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:391) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:278) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:251) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:161) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:122) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:60) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.impl.InterceptSendToEndpoint$1.process(InterceptSendToEndpoint.java:164) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:122) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:298) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:117) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.BacklogTracerInterceptor.process(BacklogTracerInterceptor.java:84) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:390) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:273) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:72) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:104) [camel-jms-2.11.0.jar:2.11.0]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:325) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:243) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1103) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1095) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:992) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [na:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [na:1.6.0_41]
    at java.lang.Thread.run(Thread.java:680) [na:1.6.0_41]
2013-10-09 19:09:17.633 ERROR org.apache.camel.processor.FatalFallbackErrorHandler$1.done()#55: \--> New exception on exchangeId: ID-pilates-local-60456-1381338556669-0-3
java.lang.IllegalStateException: null
    at no.knowit.camel.routes.KøMedFeilhåndtering$2.process(KøMedFeilhåndtering.java:39) ~[classes/:na]
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.BacklogTracerInterceptor.process(BacklogTracerInterceptor.java:84) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.FatalFallbackErrorHandler.processNext(FatalFallbackErrorHandler.java:42) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.deliverToFailureProcessor(RedeliveryErrorHandler.java:825) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:329) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:273) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:72) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:104) [camel-jms-2.11.0.jar:2.11.0]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:325) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:243) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1103) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1095) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:992) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [na:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [na:1.6.0_41]
    at java.lang.Thread.run(Thread.java:680) [na:1.6.0_41]
2013-10-09 19:09:17.645 INFO  org.apache.camel.util.CamelLogger.log()#218: Failed delivery for (MessageId: ID:pilates.local-60460-1381338557323-3:2:1:1:1 on ExchangeId: ID-pilates-local-60456-1381338556669-0-3). Exhausted after delivery attempt: 1 caught: java.lang.IllegalArgumentException: Feiler exchange med id ID-pilates-local-60456-1381338556669-0-3. Processed by failure processor: FatalFallbackErrorHandler[Channel[Wrap[no.knowit.camel.routes.KøMedFeilhåndtering$2@5ade5cd9] -> no.knowit.camel.routes.KøMedFeilhåndtering$2@5ade5cd9]]
java.lang.IllegalStateException: null
    at no.knowit.camel.routes.KøMedFeilhåndtering$2.process(KøMedFeilhåndtering.java:39) ~[classes/:na]
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.BacklogTracerInterceptor.process(BacklogTracerInterceptor.java:84) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.FatalFallbackErrorHandler.processNext(FatalFallbackErrorHandler.java:42) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.deliverToFailureProcessor(RedeliveryErrorHandler.java:825) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:329) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:273) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:72) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86) [camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:104) [camel-jms-2.11.0.jar:2.11.0]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:325) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:243) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1103) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1095) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:992) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [na:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [na:1.6.0_41]
    at java.lang.Thread.run(Thread.java:680) [na:1.6.0_41]
2013-10-09 19:09:17.657 WARN  org.apache.camel.util.CamelLogger.log()#224: Execution of JMS message listener failed. Caused by: [org.apache.camel.RuntimeCamelException - java.lang.IllegalStateException]
org.apache.camel.RuntimeCamelException: java.lang.IllegalStateException
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1338) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.jms.EndpointMessageListener$EndpointMessageListenerAsyncCallback.done(EndpointMessageListener.java:187) ~[camel-jms-2.11.0.jar:2.11.0]
    at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:108) ~[camel-jms-2.11.0.jar:2.11.0]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562) ~[spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500) ~[spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468) ~[spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:325) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:243) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1103) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1095) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:992) [spring-jms-3.2.4.RELEASE.jar:3.2.4.RELEASE]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [na:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [na:1.6.0_41]
    at java.lang.Thread.run(Thread.java:680) [na:1.6.0_41]
Caused by: java.lang.IllegalStateException: null
    at no.knowit.camel.routes.KøMedFeilhåndtering$2.process(KøMedFeilhåndtering.java:39) ~[classes/:na]
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.BacklogTracerInterceptor.process(BacklogTracerInterceptor.java:84) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.FatalFallbackErrorHandler.processNext(FatalFallbackErrorHandler.java:42) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.deliverToFailureProcessor(RedeliveryErrorHandler.java:825) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:329) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:273) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:72) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86) ~[camel-core-2.11.0.jar:2.11.0]
    at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:104) ~[camel-jms-2.11.0.jar:2.11.0]
    ... 11 common frames omitted
                        </code></pre>
                    </section>
                </section>

            </div>
        </div>

        <script src="reveal.js-2.5.0/lib/js/head.min.js"></script>
        <script src="reveal.js-2.5.0/js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                loop: false,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'reveal.js-2.5.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'reveal.js-2.5.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js-2.5.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js-2.5.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'reveal.js-2.5.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'reveal.js-2.5.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
 </html>